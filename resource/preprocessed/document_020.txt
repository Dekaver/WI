indexerror pop empty list issue elastic apm agent python github skip content sign github features mobile actions codespaces packages security code review project management integrations github sponsors customer stories team enterprise explore explore github learn contribute topics collections trending learning lab open source guides connect others readme project events community forum github education github stars program marketplace pricing plans compare plans contact sales education repository github jump suggested jump results repository github jump organization github jump repository github jump sign sign message elastic apm agent python notifications star fork code issues pull requests discussions actions wiki security insights code issues pull requests discussions actions wiki security insights new issue question project sign free github account open issue contact maintainers community pick username email address password sign github clicking sign github agree terms service privacy statement occasionally send account related emails already github sign account jump bottom indexerror pop empty list closed gusibi opened issue jun comments closed indexerror pop empty list gusibi opened issue jun comments comments copy link contributor gusibi commented jun edited alvarolobato elasticapm traces py def end_span self skip_frames span self span_stack pop span_stack may empty indexerror pop empty list text updated successfully errors encountered gusibi added commit gusibi apm agent python referenced issue jun elastic fix index error e copy link contributor beniwohli commented jun thanks gusibi usually happens caused another bug full stack trace error copy link contributor author gusibi commented jun copy link contributor author gusibi commented jun edited redis server pika https github com qihoo pika beniwohli added commit beniwohli apm agent python referenced issue jun log error trying end span started verified commit signed committer verified signature beniwohli benjamin wohlwend gpg key id b eaa dfb learn vigilant mode cfbc usually happen indication bug still ensure crash instead log message fixes elastic beniwohli mentioned issue jun log error trying end span started closed beniwohli added commit beniwohli apm agent python referenced issue jun log error trying end span started verified commit signed committer verified signature beniwohli benjamin wohlwend gpg key id b eaa dfb learn vigilant mode e e usually happen indication bug still ensure crash instead log message fixes elastic co authored goodspeed copy link contributor beniwohli commented jun thanks update hard say exactly cause place call begin_span capture_span __enter__ place call end_span capture_span __exit__ according context manager protocol __enter__ also always __exit__ explanation transaction object __enter__ different one __exit__ gusibi per chance use asynchronous framework asyncio twisted currently support asynchronous execution see could imagine could cause error like copy link contributor author gusibi commented jun beniwohli thanks use flask used asynchronous framework error process using redis every time error occurs beniwohli closed bb jun sign free join conversation github already account sign comment assignees one assigned labels none yet projects none yet milestone milestone linked pull requests successfully merging pull request may close issue log error trying end span started participants github inc terms privacy security status docs contact github pricing api training blog perform action time signed another tab window reload refresh session signed another tab window reload refresh session